{% extends "base.html" %}
{% block content %}
<div class="card">
    <div class="card-header bg-info text-white">
        <h4>Issue #{{ issue.id }}: {{ issue.title }}</h4>
    </div>
    <div class="card-body">
        <p><strong>Status:</strong> 
            {% if issue.status == 'Open' %}
                <span class="badge badge-open">Open</span>
            {% else %}
                <span class="badge badge-responded">Responded</span>
            {% endif %}
        </p>
        <p><strong>Category:</strong> <span class="badge bg-secondary">{{ issue.category|title }}</span></p>
        <p><strong>Created:</strong> {{ issue.created_at.strftime('%b %d, %Y %H:%M') }}</p>

        <h5>Description</h5>
        <div class="p-3 bg-light rounded mb-4">{{ issue.description }}</div>

        <h5>Admin Response</h5>
        {% if responses %}
            {% for r in responses %}
            <div class="response-box mb-3">
                <strong>{{ r.admin.username }}</strong>
                <small class="text-muted"> â€¢ {{ r.created_at.strftime('%b %d, %Y %H:%M') }}</small>
                <p class="mt-2 mb-0">{{ r.content }}</p>
            </div>
            {% endfor %}
        {% else %}
            <p class="text-muted">No response yet. Please check back later.</p>
        {% endif %}

        <a href="{{ url_for('dashboard') }}" class="btn btn-outline-primary mt-3">
            Back to My Issues
        </a>
    </div>
</div>
{% endblock %}