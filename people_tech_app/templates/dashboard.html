{% extends "base.html" %}
{% block content %}
<h2>My Dashboard</h2>
<p>Hello, <strong>{{ current_user.username }}</strong>!</p>

<a href="{{ url_for('raise_issue') }}" style="color: #007bff; font-weight: bold; font-size: 16px;">+ Raise New Issue</a>

<h3 style="margin-top: 20px;">My Issues</h3>

{% if issues %}
<table style="width:100%; border-collapse: collapse; margin-top: 10px;">
    <tr style="background: #f0f0f0;">
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Title</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Category</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Status</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Date</th>
        <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Action</th>
    </tr>
    {% for issue in issues %}
    <tr>
        <td style="padding: 10px; border: 1px solid #ddd;">{{ issue.title }}</td>
        <td style="padding: 10px; border: 1px solid #ddd;">{{ issue.category }}</td>
        <td style="padding: 10px; border: 1px solid #ddd;">
            {% if issue.status == 'Open' %}
                <span style="color: orange; font-weight: bold;">Open</span>
            {% else %}
                <span style="color: green; font-weight: bold;">{{ issue.status }}</span>
            {% endif %}
        </td>
        <td style="padding: 10px; border: 1px solid #ddd;">{{ issue.created_at.strftime('%b %d, %Y') }}</td>
        <td style="padding: 10px; border: 1px solid #ddd;">
            <a href="{{ url_for('view_issue', issue_id=issue.id) }}" style="color: #007bff;">View Details</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p><em>No issues yet. <a href="{{ url_for('raise_issue') }}">Raise your first one!</a></em></p>
{% endif %}

{% endblock %}